<div class="contents">
<h2>付属品の登録</h2> 
  <div class='user-form'>
    <%= form_with model: @item, data: { controller: "images"}, local: true do |f|%>
    
    <%= render 'shared/error_messages', model: f.object %>

    <div class='field'>
      <div class='field-label'>
        <%= f.label :画像 %>
      </div>
      <div class='field-input'>
        <%= f.file_field :images, multiple: true, accept: "image/jpeg,image/gif,image/png", data: { images_target: "select", action: "change->images#selectImages" } %>
      </div>
      <p data-images-target="error" class="text-red-600"></p>
    </div>
    <div data-images-target="preview">
      <% if @item.images.attached? %>
        <% @item.images.each do |image| %>
          <div class="image-box inline-flex mx-1 mb-5" data-controller="images" data-images-target= "image_box">
            <div class="text-center">
              <%= image_tag image, width: "100" %>
              <a class="link cursor-pointer" data-action="click->images#deleteImage">削除</a>
              <%= f.hidden_field :images, name: "item[images][]", style: "display: none", value: "#{image.blob.id}" %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class='field'>
      <div class='field-label'>
        <%= f.label :名前%>
      </div>
      <div class='field-input'>
        <%= f.text_field :name%>
      </div>
    </div>
    <div class='field'>
      <div class='field-label'>
        <%= f.label :カテゴリー%>
      </div>
      <div class='field-input'>
        <%= f.collection_select(:category_id, Category.all, :id, :name, {}, {class:"select-box"}) %>
      </div>
    </div>
     <div class='field'>
      <div class='field-label'>
        <%= f.label :数量%>
      </div>
      <div class='field-input'>
        <%= f.collection_select(:quantity_id, Quantity.all, :id, :name, {}, {class:"select-box"}) %>
      </div>
    </div>
    <div class='field'>
      <div class='field-label'>
        <%= f.label :備考欄%>
      </div>
      <div class='field-input'>
        <%= f.text_area :notes, placeholder: "補足説明", size: "90x5"%>
      </div>
    </div>
    <div class='field'>
      <div class='field-label'>
        <%= f.label :カラー%>
      </div>
      <div class='field-input'>
        <%= f.color_field :color%>
      </div>
    </div>
    <div class='actions'>
      <%= f.submit "登録", class: 'btn'%>
    </div>
    <% end %> 
  </div>
 </div>
</div>